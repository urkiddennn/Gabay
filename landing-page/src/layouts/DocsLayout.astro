---
import Layout from "./Layout.astro";
import DocsSidebar from "../components/DocsSidebar.astro";

interface Props {
    title: string;
}

const { title } = Astro.props;
---

<Layout title={`${title} | Gabay Docs`}>
    <!-- Mobile Header -->
    <div
        class="lg:hidden sticky top-0 z-50 flex items-center justify-between px-6 py-4 bg-bg-surface border-b border-border-main"
    >
        <a href="/" class="flex items-center gap-2">
            <img src="/logo.png" alt="Gabay" class="h-6 w-6" />
            <span class="text-text-main font-bold">Gabay</span>
        </a>
        <button
            id="mobile-sidebar-toggle"
            class="p-2 text-text-muted hover:text-blue-500 transition-colors"
            aria-label="Toggle Menu"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </div>

    <div class="max-w-[1400px] mx-auto flex">
        <DocsSidebar />

        <main
            class="flex-1 px-6 md:px-16 lg:px-24 py-8 md:py-16 lg:ml-64 min-h-screen transition-colors duration-300"
        >
            <div class="max-w-4xl docs-content">
                <slot />
            </div>
        </main>
    </div>
</Layout>

<script>
    const toggle = document.getElementById("mobile-sidebar-toggle");
    const sidebar = document.getElementById("docs-sidebar");
    const overlay = document.getElementById("sidebar-overlay");

    if (toggle && sidebar && overlay) {
        toggle.addEventListener("click", () => {
            sidebar.classList.toggle("-translate-x-full");
            overlay.classList.toggle("hidden");
            document.body.classList.toggle("overflow-hidden");
        });

        overlay.addEventListener("click", () => {
            sidebar.classList.add("-translate-x-full");
            overlay.classList.add("hidden");
            document.body.classList.remove("overflow-hidden");
        });
    }
</script>

<style is:global>
    @reference "../styles/global.css";

    /* Custom prose/docs styles to match the UI */
    .docs-content h1 {
        @apply text-4xl font-bold text-text-main mb-6 transition-colors duration-300;
    }
    .docs-content h2 {
        @apply text-2xl font-bold text-text-main mt-12 mb-4 border-b border-border-main pb-2 transition-colors duration-300;
    }
    .docs-content h3 {
        @apply text-xl font-semibold text-text-main mt-8 mb-3 transition-colors duration-300;
    }
    .docs-content p {
        @apply text-text-muted leading-relaxed mb-4 transition-colors duration-300;
    }
    .docs-content ul {
        @apply list-disc list-inside text-text-muted mb-6 space-y-2 ml-4 transition-colors duration-300;
    }
    .docs-content code {
        @apply bg-bg-surface border border-border-main rounded px-1.5 py-0.5 text-blue-500 font-mono transition-colors duration-300;
    }
    .docs-content pre {
        @apply bg-bg-surface border border-border-main rounded-xl p-6 mb-8 overflow-x-auto transition-colors duration-300;
    }
    .docs-content pre code {
        @apply bg-transparent border-0 p-0 text-text-main;
    }
    .docs-content strong {
        @apply text-text-main font-semibold transition-colors duration-300;
    }
</style>
